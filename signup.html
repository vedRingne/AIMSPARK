<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AIMSPARK - Signup</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #031048 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #333;
      overflow: hidden;
      position: relative;
    }
    .bg-animation { position: absolute; width: 100%; height: 100%; z-index: 0; }
    .floating-shapes { position: absolute; width: 100px; height: 100px; border-radius: 50%; background: rgba(255, 255, 255, 0.1); animation: float 6s ease-in-out infinite; }
    .shape-1 { top: 10%; left: 10%; animation-delay: 0s; }
    .shape-2 { top: 20%; right: 10%; animation-delay: 1s; transform: scale(0.8); }
    .shape-3 { bottom: 10%; left: 15%; animation-delay: 2s; transform: scale(1.2); }
    .shape-4 { bottom: 20%; right: 20%; animation-delay: 3s; }
    @keyframes float { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-20px) rotate(180deg); } }
    .login-container { position: relative; z-index: 10; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px); border-radius: 25px; padding: 3rem; width: 100%; max-width: 450px; }
    .login-header { text-align: center; margin-bottom: 2rem; }
    .logo { font-size: 2.5rem; font-weight: bold; background: linear-gradient(45deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 0.5rem; }
    .login-form { display: flex; flex-direction: column; gap: 1.5rem; }
    .form-group { position: relative; }
    .form-group input { width: 100%; padding: 1rem; border: 2px solid #e1e5e9; border-radius: 15px; font-size: 1rem; }
    .password-toggle { position: absolute; right: 15px; top: 38px; cursor: pointer; }
    .login-btn { background: linear-gradient(45deg, #667eea, #764ba2); color: white; border: none; padding: 1rem; border-radius: 15px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: 0.3s ease; }
    .login-btn:disabled { background: gray; cursor: not-allowed; }
    .error-message { background: rgba(220, 53, 69, 0.1); color: #dc3545; padding: 0.8rem; border-radius: 10px; display: none; margin-bottom: 1rem; }
    .success-message { background: rgba(40, 167, 69, 0.1); color: #28a745; padding: 0.8rem; border-radius: 10px; display: none; margin-bottom: 1rem; }
    .signup-link { text-align: center; margin-top: 1rem; }
    .signup-link a { color: #764ba2; text-decoration: none; font-weight: bold; }
  </style>
</head>
<body>

<div class="bg-animation">
  <div class="floating-shapes shape-1"></div>
  <div class="floating-shapes shape-2"></div>
  <div class="floating-shapes shape-3"></div>
  <div class="floating-shapes shape-4"></div>
</div>

<div class="login-container">
  <div class="login-header">
    <h1 class="logo">AIMSPARK</h1>
    <p class="welcome-text">Join us!</p>
    <p class="subtitle">Create your account to start innovating</p>
  </div>

  <div class="error-message" id="errorMessage"></div>
  <div class="success-message" id="successMessage"></div>

  <form class="login-form" id="signupForm">
    <div class="form-group">
      <label for="name">Full Name</label>
      <input type="text" id="name" placeholder="Enter your full name" required />
    </div>

    <div class="form-group">
      <label for="email">Email Address</label>
      <input type="email" id="email" placeholder="Enter your email" required />
    </div>

    <div class="form-group">
      <label for="password">Password</label>
      <input type="password" id="password" placeholder="Create a password" required />
      <span class="password-toggle" onclick="togglePassword()">üëÅÔ∏è</span>
    </div>

    <button type="submit" class="login-btn" id="signupBtn">Sign Up</button>
  </form>

  <div class="signup-link">
    Already have an account? <a href="login.html">Sign in</a>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
  const SUPABASE_URL = "https://ulhjptxfzgsbepwtjqro.supabase.co";
  const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVsaGpwdHhmemdzYmVwd3RqcXJvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcyMTYyMjgsImV4cCI6MjA3Mjc5MjIyOH0.gSRuXu_4z4AcEqSK-HDpHaNeuQ_R74cvqnfg_T75U-A";
  const client = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  function togglePassword() {
    const passwordInput = document.getElementById("password");
    const toggle = document.querySelector(".password-toggle");
    if (passwordInput.type === "password") {
      passwordInput.type = "text";
      toggle.textContent = "üôà";
    } else {
      passwordInput.type = "password";
      toggle.textContent = "üëÅÔ∏è";
    }
  }

  document.getElementById("signupForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const name = document.getElementById("name").value.trim();
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();
    const errorMessage = document.getElementById("errorMessage");
    const successMessage = document.getElementById("successMessage");
    const signupBtn = document.getElementById("signupBtn");

    errorMessage.style.display = "none";
    successMessage.style.display = "none";

    if (password.length < 6) {
      errorMessage.textContent = "Password must be at least 6 characters long.";
      errorMessage.style.display = "block";
      return;
    }

    signupBtn.disabled = true;
    signupBtn.textContent = "Signing up...";

    const { data, error } = await client.auth.signUp({
      email,
      password,
      options: {
        data: { full_name: name }
      }
    });

    signupBtn.disabled = false;
    signupBtn.textContent = "Sign Up";

    if (error) {
      errorMessage.textContent = error.message;
      errorMessage.style.display = "block";
    } else {
      successMessage.textContent = "Signup successful! Please check your email for verification.";
      successMessage.style.display = "block";

      setTimeout(() => {
        window.location.href = "login.html";
      }, 4000);
    }
  });

  // Redirect if already logged in
  async function checkLoggedIn() {
    const { data: { user } } = await client.auth.getUser();
    if (user) {
      window.location.href = "index.html";
    }
  }
  checkLoggedIn();
</script>

</body>
</html>
